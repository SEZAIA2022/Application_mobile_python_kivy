<ChangePasswordScreen>:
    name: "change_password"
    TopBar:
        title: "Change password"
        right_action_items: [["lock"]]

    MDBoxLayout:
        orientation: 'vertical'
        spacing: 10
        padding: 10

        ScrollView:
            size_hint_y: None
            height: root.height - dp(80)
            pos_hint: {"top": 1}
            do_scroll_x: False
            do_scroll_y: True

            BoxLayout:
                orientation: 'vertical'
                size_hint_y: None
                height: self.minimum_height
                padding: [40, 20, 40, 20]
                spacing: 20

                Textinput:
                    id: email
                    hint_text: "Email"
                    icon_right: "email"
                    
                Textinput:
                    id: old_password
                    hint_text: "Old password"
                    icon_right: "eye-off"
                    password: True
                    
                Textinput:
                    id: new_password
                    hint_text: "New password"
                    icon_right: "eye-off"
                    password: True
                   
                Textinput:
                    id: confirm_new_password
                    hint_text: "Confirm new password"
                    icon_right: "eye-off"
                    password: True
                   
                BoxLayout:
                    size_hint: 1, None
                    height: "30dp"
                    spacing: 10

                    MDCheckbox:
                        id: cb
                        size_hint: None, None
                        width: "30dp"
                        height: "30dp"
                        on_release:
                            old_password.password = not old_password.password
                            old_password.icon_right = "eye" if old_password.icon_right == "eye-off" else "eye-off"
                            new_password.password = not new_password.password
                            new_password.icon_right = "eye" if new_password.icon_right == "eye-off" else "eye-off"
                            confirm_new_password.password = not confirm_new_password.password
                            confirm_new_password.icon_right = "eye" if confirm_new_password.icon_right == "eye-off" else "eye-off"

                    MDLabel:
                        text: '[ref=Show Password]Show Password[/ref]'
                        markup: True
                        font_size: "14sp"
                        color: rgba('#6A707C')
                        on_ref_press:
                            cb.active = not cb.active
                            old_password.password = not old_password.password
                            old_password.icon_right = "eye" if old_password.icon_right == "eye-off" else "eye-off"
                            new_password.password = not new_password.password
                            new_password.icon_right = "eye" if new_password.icon_right == "eye-off" else "eye-off"
                            confirm_new_password.password = not confirm_new_password.password
                            confirm_new_password.icon_right = "eye" if confirm_new_password.icon_right == "eye-off" else "eye-off"

                RoundedButton:
                    text: 'Continue'
                    on_release: 
                        root.change_password()
                   